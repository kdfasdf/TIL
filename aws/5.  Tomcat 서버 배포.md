배포를 하기 위한 사전 작업이 어느정도 되어 있으니 배포 과정에 대해서 정리해보자
0. 아래 과정을 하기 전에 톰캣 서버를 열어두었는지 확인 
```
ps -ef | grep tomcat
```
열려 있다면 shudown.sh 혹은 kill

1. git clone
배포할 웹 프로젝트의 저장소를 clone 한다
```
git clone <레포지토리 주소>
```
2. 브랜치 변경
보통 프로젝트를 관리할 때 버전 별로 브랜치를 나누어 관리하는데 처음 clone 한 브랜치는 main 혹은 master 브랜치 이므로 배포할 버전의 브랜치로 변경해 준다
- branch 상태 확인
```
git branch -a
```
- branch 생성 및 변경
```
git checkout -b <branch 명> <원격 레포지토리의 branch 명>
```
원격 레포지토리 branch의 이름은 git branch -a에서 확인한 브랜치 중 배포할 하나를 선택한다
3.빌드
```
mvn clean package
```
미완성 된 테스트 코드 때문에 빌드가 실패하는 경우가 있는데 그럴 경우
```
mvn install -Dmaven.test.skip=true 
```
테스트코드를 스킵하고 빌드를 진행할 수 있다.
4. 배포 폴더 톰캣 폴더로 옮기기
빌드가 성공하면 target 안에 서블릿, css, 자바스크립트의 파일이 배포 가능한 상태의 war 파일로 패키징 되어 있는데 이 war 파일을 사용해도 되고 war파일과 같은 이름의 디렉토리를 
그대로 사용해도 된다 mv 명령어를 사용하여 톰캣의 webapp으로 옮길 것
5. 톰캣의 bin 디렉토리에서 서버를 실행한다
- 실행
```
./startup.sh
```
- 중단
```
./shutdown.sh
```

#### 번외
logs 디렉토리에서
```
tail -<행 크기>f catalina.out
```
을 통해 행크기까지 로그를 실시간으로 확인할 수 있음 

## 이슈 및 할 것
- 심볼릭 링크를 쓰자 여기갔다 저기갔다 불필요한 타이핑이 늘어나는 것을 체감했다
- 배포를 했는데 css 파일이 적용 안되는 문제가 발생 로컬에서는 문제 없었으다 개발자도구를 통해 확인한 결과 404 에러로 응답을 못받고 있는 상황이었음
  - 빌드하는데 war 관련 설정이 잘못된 것 이 아닌가 싶어서 maven-war-plugin 버전 수정
    -> 미해결
  - pom.xml 상 tomcat의 버전과 aws 우분투에 설치한 톰캣 버전이 다른 문제(해봐야함)
  - 그 밖의 css 경로 , 접근 권한 등 변경해봐야함
